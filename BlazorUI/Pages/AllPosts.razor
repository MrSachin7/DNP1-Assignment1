@page "/All-Posts"
@using Entities.Models
@using Contracts
@inject IForumService forumService

@if (allPosts == null) {
    <p>
        <em> Loading....</em>
    </p>
}
else if (!allPosts.Any()) {
    <p>
        <em> No posts available...</em>
    </p>
}
else {
@foreach (Post post in allPosts) {
    <div class="row">
        <div class="col-6">
            <div class="forum-container">
                <label class="username">
                    @post.WrittenBy.Username
                </label>
                <br/>
                <label class="post-header" @onclick="@(() => OpenPost(post))">
                    @post.Header
                </label>
                <br/>
                <label class="post-description" @onclick="@(() => OpenPost(post))">
                    @DescriptionToDisplay(post)
                </label>
            </div>
        </div>
    </div>
}
}


@code {
    private List<Post>? allPosts;

    protected override async Task OnInitializedAsync() {
        // allPosts = await forumService.GetAllPostsAsync();
        allPosts = new List<Post>();
        allPosts.Add(new Post("The dotnet watch functionality not working","I am trying to do the Blazor stuff for the past few" +
                                                                           "days but for some wierd reason the dotnet watch functionality is not working . Please help me",new Entities.Models.User("dotnetGUY","dotnetBolte123")));
        allPosts.Add(new Post("The dotnet watch functionality not working","I am trying to do the Blazor stuff for the past few" +
                                                                           "days but for some wierd reason the dotnet watch functionality is not working . Please help me",new Entities.Models.User("dotnetGUY","dotnetBolte123")));
        allPosts.Add(new Post("The dotnet watch functionality not working","I am trying to do the Blazor stuff for the past few" +
                                                                           "days but for some wierd reason the dotnet watch functionality is not working . Please help me",new Entities.Models.User("dotnetGUY","dotnetBolte123")));

    }

    private async Task OpenPost(Post post) {
    }

    private string DescriptionToDisplay(Post post) {
        if (post.Body.Length <= 200) {
            return post.Body;
        }
        return post.Body.Substring(0, 200);
    }

}